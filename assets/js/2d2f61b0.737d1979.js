"use strict";(self.webpackChunktech_blog=self.webpackChunktech_blog||[]).push([[8145],{3152:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var l=t(5893),s=t(1151);const r={id:"kubernetes",title:"kubernetes",sidebar_label:"Kubernetes"},o=void 0,a={id:"snippets/cloud/ci/kubernetes",title:"kubernetes",description:"What can Kubernetes do for you?",source:"@site/docs/snippets/cloud/ci/kubernetes.mdx",sourceDirName:"snippets/cloud/ci",slug:"/snippets/cloud/ci/kubernetes",permalink:"/docs/snippets/cloud/ci/kubernetes",draft:!1,unlisted:!1,editUrl:"https://github.com/dipjyotimetia/Docs/docs/snippets/cloud/ci/kubernetes.mdx",tags:[],version:"current",frontMatter:{id:"kubernetes",title:"kubernetes",sidebar_label:"Kubernetes"},sidebar:"Docs",previous:{title:"Docker",permalink:"/docs/snippets/cloud/ci/docker"},next:{title:"Jenkins",permalink:"/docs/snippets/cloud/ci/jenkins"}},i={},c=[{value:"Learn kubernetes basiscs",id:"learn-kubernetes-basiscs",level:3},{value:"Create kubernetes cluser",id:"create-kubernetes-cluser",level:3},{value:"Create kubernetes deployment from a image",id:"create-kubernetes-deployment-from-a-image",level:2},{value:"Create kubernetes service",id:"create-kubernetes-service",level:2},{value:"Get Services",id:"get-services",level:2},{value:"Creating POD",id:"creating-pod",level:2},{value:"Port forwarding",id:"port-forwarding",level:3},{value:"Get logs",id:"get-logs",level:3},{value:"Interactive shell inside the pod",id:"interactive-shell-inside-the-pod",level:3},{value:"Check deployments",id:"check-deployments",level:3},{value:"Scale the deployment",id:"scale-the-deployment",level:3},{value:"Trigger rolling update",id:"trigger-rolling-update",level:3},{value:"Delete Cluster",id:"delete-cluster",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.admonition,{type:"tip",children:(0,l.jsx)(n.p,{children:"What can Kubernetes do for you?\nWith modern web services, users expect applications to be available 24/7, and developers expect to deploy new versions of those applications several times a day. Containerization helps package software to serve these goals, enabling applications to be released and updated without downtime. Kubernetes helps you make sure those containerized applications run where and when you want, and helps them find the resources and tools they need to work. Kubernetes is a production-ready, open source platform designed with Google's accumulated experience in container orchestration, combined with best-of-breed ideas from the community."})}),"\n",(0,l.jsx)(n.h3,{id:"learn-kubernetes-basiscs",children:"Learn kubernetes basiscs"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.a,{href:"https://kubernetes.io/docs/tutorials/kubernetes-basics/",children:"https://kubernetes.io/docs/tutorials/kubernetes-basics/"})}),"\n",(0,l.jsx)(n.h3,{id:"create-kubernetes-cluser",children:"Create kubernetes cluser"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\ngcloud container clusters create [CLUSTER-NAME]\n\ngcloud container clusters get-credentials [CLUSTER-NAME]\n"})}),"\n",(0,l.jsx)(n.h2,{id:"create-kubernetes-deployment-from-a-image",children:"Create kubernetes deployment from a image"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl create deployment hello-server --image=gcr.io/google-samples/hello-app:1.0\n"})}),"\n",(0,l.jsx)(n.h2,{id:"create-kubernetes-service",children:"Create kubernetes service"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl expose deployment hello-server --type=LoadBalancer --port 8080\n"})}),"\n",(0,l.jsx)(n.p,{children:'In this command:\n--port specifies the port that the container exposes.\ntype="LoadBalancer" creates a Compute Engine load balancer for your container.'}),"\n",(0,l.jsx)(n.h2,{id:"get-services",children:"Get Services"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get service\n"})}),"\n",(0,l.jsx)(n.h2,{id:"creating-pod",children:"Creating POD"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: monolith\n  labels:\n    app: monolith\nspec:\n  containers:\n    - name: monolith\n      image: kelseyhightower/monolith:1.0.0\n      args:\n        - "-http=0.0.0.0:80"\n        - "-health=0.0.0.0:81"\n        - "-secret=secret"\n      ports:\n        - name: http\n          containerPort: 80\n        - name: health\n          containerPort: 81\n      resources:\n        limits:\n          cpu: 0.2\n          memory: "10Mi"\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl create -f pods/monolith.yaml\nkubectl get pods\nkubectl describe pods monolith\n"})}),"\n",(0,l.jsx)(n.h3,{id:"port-forwarding",children:"Port forwarding"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward monolith 10080:80\n"})}),"\n",(0,l.jsx)(n.h3,{id:"get-logs",children:"Get logs"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl logs monolith\n## Stream logs\nkubectl logs -f monolith\n"})}),"\n",(0,l.jsx)(n.h3,{id:"interactive-shell-inside-the-pod",children:"Interactive shell inside the pod"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl exec monolith --stdin --tty -c monolith /bin/sh\n\n### Check the external connectivity\nping -c 3 google.com\n"})}),"\n",(0,l.jsx)(n.h3,{id:"check-deployments",children:"Check deployments"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl explain deployment\nkubectl explain deployment --recursive\nkubectl explain deployment.metadata.name\n"})}),"\n",(0,l.jsx)(n.h3,{id:"scale-the-deployment",children:"Scale the deployment"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl scale deployment hello --replicas=5\n## Verify the scale\nkubectl get pods | grep hello- | wc -l\n"})}),"\n",(0,l.jsx)(n.h3,{id:"trigger-rolling-update",children:"Trigger rolling update"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'kubectl edit deployment hello\n\nkubectl get replicaset\n\nkubectl rollout history deployment/hello\n\nkubectl rollout pause deployment/hello\n\nkubectl rollout status deployment/hello\n\nkubectl get pods -o jsonpath --template=\'{range .items[*]}{.metadata.name}{"\\t"}{"\\t"}{.spec.containers[0].image}{"\\n"}{end}\'\n\nkubectl rollout resume deployment/hello\n\nkubectl rollout undo deployment/hello\n'})}),"\n",(0,l.jsx)(n.h2,{id:"delete-cluster",children:"Delete Cluster"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"gcloud container clusters delete [CLUSTER-NAME]\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>o});var l=t(7294);const s={},r=l.createContext(s);function o(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);