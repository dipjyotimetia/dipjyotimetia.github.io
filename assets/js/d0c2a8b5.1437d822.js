"use strict";(self.webpackChunktech_blog=self.webpackChunktech_blog||[]).push([[9082],{5880:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var o=n(5893),r=n(1151);const i={id:"godoc2",title:"Get Little bit deeper",sidebar_label:"Get Little bit deeper"},s=void 0,a={id:"snippets/programming/go/godoc2",title:"Get Little bit deeper",description:"Pattern of code calling",source:"@site/docs/snippets/programming/go/godoc2.mdx",sourceDirName:"snippets/programming/go",slug:"/snippets/programming/go/godoc2",permalink:"/docs/snippets/programming/go/godoc2",draft:!1,unlisted:!1,editUrl:"https://github.com/dipjyotimetia/Docs/docs/snippets/programming/go/godoc2.mdx",tags:[],version:"current",frontMatter:{id:"godoc2",title:"Get Little bit deeper",sidebar_label:"Get Little bit deeper"},sidebar:"Docs",previous:{title:"Get Started",permalink:"/docs/snippets/programming/go/godoc1"},next:{title:"Go Concepts",permalink:"/docs/snippets/programming/go/godoc3"}},c={},l=[{value:"Pattern of code calling",id:"pattern-of-code-calling",level:3},{value:"Simple http test",id:"simple-http-test",level:3}];function p(t){const e={code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.a)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h3,{id:"pattern-of-code-calling",children:"Pattern of code calling"}),"\n",(0,o.jsx)(e.p,{children:"golang order of code execution\nimport --\x3e const --\x3e var --\x3e init()"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'package creature\n\nimport (\n    "math/rand"\n    "time"\n)\n\nvar creatures = []string{"shark", "jellyfish", "squid", "octopus", "dolphin"}\n\nfunc init() {\n    rand.Seed(time.Now().UnixNano())\n}\n\nfunc Random() string {\n    i := rand.Intn(len(creatures))\n    return creatures[i]\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"simple-http-test",children:"Simple http test"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"io/ioutil"\n\t"net/http"\n\t"os"\n\t"strings"\n\t"testing"\n\n\trest "github.com/hashicorp/go-retryablehttp"\n)\n\nfunc TestService(t *testing.T) {\n\tport := os.Getenv("PORT")\n\tif port == "" {\n\t\tport = "8080"\n\t}\n\n\turl := os.Getenv("SERVICE_URL")\n\tif url == "" {\n\t\turl = "http://localhost:" + port\n\t}\n\n\tresp, err := rest.Get(url + "/")\n\tresp.Header.Add("", "")\n\tif err != nil {\n\t\tt.Fatalf("retry.Get: %v", err)\n\t}\n\n\tif got := resp.StatusCode; got != http.StatusOK {\n\t\tt.Errorf("HTTP Response: got %q, want %q", got, http.StatusOK)\n\t}\n\n\tout, err := ioutil.ReadAll(resp.Body)\n\tif err != nil {\n\t\tt.Fatalf("ioutil.ReadAll: %v", err)\n\t}\n\n\twant := "Congratulations, you successfully deployed a container image to Cloud Run"\n\tif !strings.Contains(string(out), want) {\n\t\tt.Errorf("HTTP Response: body does not include %q", want)\n\t}\n}\n'})})]})}function d(t={}){const{wrapper:e}={...(0,r.a)(),...t.components};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(p,{...t})}):p(t)}},1151:(t,e,n)=>{n.d(e,{Z:()=>a,a:()=>s});var o=n(7294);const r={},i=o.createContext(r);function s(t){const e=o.useContext(i);return o.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function a(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(r):t.components||r:s(t.components),o.createElement(i.Provider,{value:e},t.children)}}}]);