<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Hola, welcome to my Tech Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Hola, welcome to my Tech Blog Atom Feed"><title data-react-helmet="true">Blog | Hola, welcome to my Tech Blog</title><meta data-react-helmet="true" property="og:title" content="Blog | Hola, welcome to my Tech Blog"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" property="og:url" content="https://dipjyotimetia.github.io/blog"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="blog_posts_list"><link data-react-helmet="true" rel="icon" href="/img/pic.jpeg"><link data-react-helmet="true" rel="canonical" href="https://dipjyotimetia.github.io/blog"><link data-react-helmet="true" rel="alternate" href="https://dipjyotimetia.github.io/blog" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dipjyotimetia.github.io/blog" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f4719793.css">
<link rel="preload" href="/assets/js/runtime~main.1ed65664.js" as="script">
<link rel="preload" href="/assets/js/main.7e4df6d9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/pic.jpeg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/pic.jpeg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Dipjyoti`s Blog</b></a><a class="navbar__item navbar__link" href="/docs/">Projects</a><a class="navbar__item navbar__link" href="/docs/snippets/overview">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://www.thoughtworks.com/radar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Technology Radar<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://dev.to/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Dev To<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://news.ycombinator.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Hackers News<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/function">function</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/kafka">Kafka</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/github">Github Eyes</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/serverless">Serverless Framework</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/function">function</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-07-30T00:00:00.000Z" itemprop="datePublished">July 30, 2021</time> Â· <!-- -->4 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/dipjyotimetia" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars3.githubusercontent.com/u/18288720?s=400&amp;u=168a31a123ff5c1c44afc29a579f91d13813da54&amp;v=4" alt="Dipjyoti Metia"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/dipjyotimetia" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dipjyoti Metia</span></a></div><small class="avatar__subtitle" itemprop="description">Lead Software Engineer</small></div></div></div></div></header><meta itemprop="image" content="https://dipjyotimetia.github.io/../static/img/blog/cloudfunctions.png"><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="what-is-serverless">What is serverless<a class="hash-link" href="#what-is-serverless" title="Direct link to heading">â€‹</a></h2><p>Serverless computing is a method of providing backend services on an as-used basis. A serverless provider allows users to write and deploy code without the hassle of worrying about the underlying infrastructure. code executes in a fully managed environment and no need to provision any infrastructure.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="introduction-to-cloud-functions">Introduction to cloud functions<a class="hash-link" href="#introduction-to-cloud-functions" title="Direct link to heading">â€‹</a></h2><p>Google Cloud Functions is a serverless execution environment for building and connecting cloud services. With Cloud Functions you write simple, single-purpose functions that are attached to events emitted from your cloud infrastructure and services. Your Cloud Function is triggered when an event being watched is fired. Your code executes in a fully managed environment. There is no need to provision any infrastructure or worry about managing any servers.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="functions-framework">Functions Framework<a class="hash-link" href="#functions-framework" title="Direct link to heading">â€‹</a></h2><p>The Functions Framework lets you write lightweight functions that run in many different environments. <a href="https://github.com/GoogleCloudPlatform/functions-framework" target="_blank" rel="noopener noreferrer">Functions framework</a></p><div class="codeBlockContainer_K1bP language-go theme-code-block"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/GoogleCloudPlatform/functions-framework-go/funcframework&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    p </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/cloudmock&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;golang.org/x/net/context&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;log&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;os&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ctx </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Background</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> funcframework</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">RegisterHTTPFunctionContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GoMock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Fatalf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;funcframework.RegisterHTTPFunctionContext: %v\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    port </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;8080&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> envPort </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Getenv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;PORT&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> envPort </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        port </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> envPort</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> funcframework</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Start</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Fatalf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;funcframework.Start: %v\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-go theme-code-block"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">package</span><span class="token plain"> db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;context&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;log&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;os&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;time&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/cloudmock/config&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/cloudmock/secret&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;go.mongodb.org/mongo-driver/mongo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;go.mongodb.org/mongo-driver/mongo/options&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> ENV </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ENVIRONMENT&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">NewDatabaseConnection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">mongo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Collection </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> err </span><span class="token builtin" style="color:rgb(130, 170, 255)">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Connecting to mongodb&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    conf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">LoadConfigPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;config/app&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Fatalf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    env </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Getenv</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ENV</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> client </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">mongo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Client</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    conn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> secret</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetSecrets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Fatalf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mongo db secret url failed %v&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> env </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;dev&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Connecting to localdb&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> mongo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">SetAuth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Credential</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                Username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> conf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">DBuser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                Password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> conf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">DBpassword</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ApplyURI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">conf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">DBurl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> mongo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ApplyURI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">conn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Fatalf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mongo db client failed %v&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> cancel </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Background</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">defer</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cancel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    err </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Fatalf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mongo db connection failed %s&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//nolint:gocritic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Database</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;function&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Collection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;payments&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-go theme-code-block"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">package</span><span class="token plain"> router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;encoding/json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/brianvoe/gofakeit/v6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;net/http&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> UserDetails </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Name     </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">`json:&quot;name&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Email    </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">`json:&quot;email&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Phone    </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">`json:&quot;phone&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Address  </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">`json:&quot;address&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Company  </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">`json:&quot;company&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    JobTitle </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">`json:&quot;jobTitle&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">NewUserWrite</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">UserDetails </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> usr </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">UserDetails</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> gofakeit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">RandomInt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        usr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">append</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">usr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> UserDetails</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">     gofakeit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Email</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    gofakeit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Email</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Phone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    gofakeit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Phone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  gofakeit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Company</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">  gofakeit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Company</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            JobTitle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> gofakeit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">JobTitle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">usr</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">User</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">w http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ResponseWriter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> r </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">w http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ResponseWriter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> r </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Header</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Content-Type&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;application/json&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        jData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Marshal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">NewUserWrite</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">StatusInternalServerError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WriteHeader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">StatusOK</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">jData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP language-go theme-code-block"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">package</span><span class="token plain"> p</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/cloudmock/router&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/go-chi/chi/v5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/go-chi/chi/v5/middleware&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/go-chi/httprate&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/rs/cors&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;net/http&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;time&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">GoMock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">w http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ResponseWriter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> r </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rc </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> chi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewRouter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    conn </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> db</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewDatabaseConnection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">middleware</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">RealIP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">middleware</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Logger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">httprate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Limit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        httprate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WithLimitHandler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">w http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">ResponseWriter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> r </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;too many requests&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">StatusTooManyRequests</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Route</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/api/v1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rc chi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Router</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        rc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/users&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> router</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">User</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        rc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/categories&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> router</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Category</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    cors</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Handler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">rc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ServeHTTP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="deploy-cloud-function">Deploy cloud function<a class="hash-link" href="#deploy-cloud-function" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_K1bP language-yaml theme-code-block"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build and Deploy to CloudFunction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">branches</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> main </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">deploy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> deploy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> google</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">github</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">actions/setup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">gcloud@master</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">project_id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> secrets.GCP_PROJECT_ID </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">service_account_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> secrets.gcp_credentials </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">export_default_credentials</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Deploy serverless function</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token scalar string" style="color:rgb(195, 232, 141)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">          gcloud functions deploy &quot;GoMock&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            --runtime go113 --trigger-http \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            --allow-unauthenticated \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            --region australia-southeast1 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            --update-env-vars MONGODB=${{ secrets.mongo_secret }} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            --max-instances 2 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            --memory 128mb \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            --service-account=${{ secrets.service_account }} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token scalar string" style="color:rgb(195, 232, 141)">            --no-user-output-enabled</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="why-mocking-using-cloud-function">Why Mocking using cloud function<a class="hash-link" href="#why-mocking-using-cloud-function" title="Direct link to heading">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_31ik" id="use-cases-of-mocking-using-cloud-function">Use cases of mocking using cloud function<a class="hash-link" href="#use-cases-of-mocking-using-cloud-function" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="system-testing">System Testing<a class="hash-link" href="#system-testing" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_31ik" id="performance-testing">Performance testing<a class="hash-link" href="#performance-testing" title="Direct link to heading">â€‹</a></h3><p>Performance tests check the behaviors of the system when it is under significant load. These tests are non-functional and can have the various form to understand the reliability, stability, and availability of the platform. For instance, it can be observing response times when executing a high number of requests, or seeing how the system behaves with a significant of data.</p><p><img alt="img.png" src="/assets/images/K6Result-25acebe39961c7920c7dbca40e2e33e8.png">
<img alt="img.png" src="/assets/images/function-9fb2556cd7f83454557403a8a7a0ffa7.png"></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/cloud-function">cloud function</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/tech">tech</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/golang">golang</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/serverless">serverless</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/kafka">Kafka</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-04-17T00:00:00.000Z" itemprop="datePublished">April 17, 2021</time> Â· <!-- -->7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/dipjyotimetia" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars3.githubusercontent.com/u/18288720?s=400&amp;u=168a31a123ff5c1c44afc29a579f91d13813da54&amp;v=4" alt="Dipjyoti Metia"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/dipjyotimetia" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dipjyoti Metia</span></a></div><small class="avatar__subtitle" itemprop="description">Lead Software Engineer</small></div></div></div></div></header><meta itemprop="image" content="https://dipjyotimetia.github.io/../static/img/blog/kafka/kafka_title.png"><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_31ik" id="what-is-apache-kafka">What is Apache Kafka?<a class="hash-link" href="#what-is-apache-kafka" title="Direct link to heading">â€‹</a></h2><p>Apache Kafka is a framework implementation of a software bus using stream-processing. It is an open-source software platform developed by the Apache Software Foundation written in Scala and Java.
The project aims to provide a unified, high-throughput, low-latency platform for handling real-time data feeds.
Behind the scenes, Kafka is distributed, scales well, replicates data across brokers (servers), can survive broker downtime, and much more.
<img alt="img.png" src="/assets/images/kafka_desc-3b6593e69e25d2573d66a320f172c586.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="topics-partitions-and-offsets">Topics, Partitions and Offsets<a class="hash-link" href="#topics-partitions-and-offsets" title="Direct link to heading">â€‹</a></h2><p><strong>Topics: A particular stream of data</strong></p><ul><li>Similar to a table of the database</li><li>You can have as many topics you can</li><li>A topic is identified by its name</li></ul><p><strong>Topics are split in partitions</strong></p><ul><li>Each partition is ordered</li><li>Each message in partition will get an incremental ID called offset</li><li>Partition 0, 1, 2 ....</li><li>Order only guaranteed within a partition, not across partitions</li><li>Data is kept only for a limited time.</li><li>Once the data is written to a partition it cannot be changed.</li></ul><p>Example Scenario :
You can have multiple cabs, and each cabs reports its GPS location to kafka. You can have a topic cabs_gps that contains
the position of all cabs. Each cab will send a message to kafka every 20 sec, each message will contain the cabID, and
the cab location(lat/long)</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="brokers--topics">Brokers &amp; Topics<a class="hash-link" href="#brokers--topics" title="Direct link to heading">â€‹</a></h2><ul><li>A kafka cluster is composed of multiple brokers(servers)</li><li>Each broker is identified by its ID(integer)</li><li>Each broker contains certain topic partitions</li><li>After connecting to any broker(called a bootstrap broker), you will be connected to the entire cluster</li><li>A good number to get start is 3 brokers, but some big clusters have more than 100 brokers</li></ul><p>Example of topic A with 3 partitions<br>
<!-- -->Example of topic B with 2 partitions<br>
<img alt="img.png" src="/assets/images/broker-47961d19ebc7401c22aa9c9d8aa34c5d.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="topics-replication">Topics replication<a class="hash-link" href="#topics-replication" title="Direct link to heading">â€‹</a></h2><ul><li><p>Topics should have a replication factor &gt;1 (Usually between 2 and 3)</p></li><li><p>This way if one broker is down another broker can serve the data. Example of topic A with replication factor 2
<img alt="img.png" src="/assets/images/replication-76b7d2b205633bcf8985a7e2518cb1f8.png"></p></li><li><p>At any time only ONE broker can be a leader for a given partition</p></li><li><p>Only that leader can receive and serve data for a partition.</p></li><li><p>The other broker will synchronize the data.</p></li><li><p>So each partition has one leader and multiple ISR (in-sync-replica)
<img alt="img.png" src="/assets/images/replica_leader-7ed14bc8b49afbb8054fb13fad88549b.png"></p></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="producer">Producer<a class="hash-link" href="#producer" title="Direct link to heading">â€‹</a></h2><ul><li>Producer write data to topics(which is made of partitions)</li><li>Producer automatically know to which broker and partition to write.</li><li>In case broker failure, Producers will automatically recover
<img alt="img.png" src="/assets/images/producer-f693135d019231adfc99806be3b675a7.png"></li><li>Producers can choose to receive acknowledgment of data writes.<ul><li>acks=0 Producer won&#x27;t wait for acknowledgment (Possible data loss)</li><li>acks=1 Producer will wait for leader acknowledgment (Limited data loss)</li><li>acks=2 Leader &amp; Replica acknowledgment (no data loss)</li></ul></li><li>Producer can choose to send a key with the message(string,num etc.)</li><li>If key==null data will sent round robin(broker 101 then 102 then 103)</li><li>If key is sent then all message for that key will send to same partition</li><li>A key is sent if we need a message ordering for a specific field as cabID.</li></ul><div class="codeBlockContainer_K1bP language-java theme-code-block"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">producer.java</div><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    String topic = &quot;second-topic&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    String value = &quot;hello kafka&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    String bootstrapServer = &quot;127.0.0.1:9092&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Create producer properties</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Properties properties = new Properties();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    properties.setProperty(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServer);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    properties.setProperty(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    properties.setProperty(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Create the producer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(properties);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(topic, value);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    log.info(&quot;Creating producer&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Send Data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    producer.send(record, (metadata, e) -&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // Execute every time record is successfully send</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if (e == null) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            log.info((metadata.timestamp()));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            log.info(topic, metadata.topic());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            log.info(metadata.hasOffset());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            log.info(metadata.hasTimestamp());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    producer.flush();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    producer.close();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="consumer">Consumer<a class="hash-link" href="#consumer" title="Direct link to heading">â€‹</a></h2><ul><li>Consumer read data from a topic(identified by name)</li><li>Consumer knows which broker to read from</li><li>In case of broker failure, consumer know how to recover</li><li>Data is read in order with in each partition
<img alt="img.png" src="data:image/png;base64,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"></li><li>Consumer read data in consumer groups</li><li>Each consumer within a group reads form exclusive partitions</li><li>If you have more consumers than partitions, some consumers will be inactive</li><li>Kafka stores the offset at which a consumer group has been reading</li><li>The offsets committed live in a kafka topic named _consumer_offsets</li><li>When a consumer in a group has processed the data received from kafka, it should be committing the offsets.</li><li>If a consumer dies, it will be able to read back from where it left off.</li></ul><div class="codeBlockContainer_K1bP language-java theme-code-block"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">consumer.java</div><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    String bootstrapServer = &quot;127.0.0.1:9092&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    String groupId = &quot;my-sixth-application&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    String topic = &quot;second-topic&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Create consumer config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Properties properties = new Properties();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    properties.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServer);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    properties.setProperty(ConsumerConfig.GROUP_ID_CONFIG, groupId);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    properties.setProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // Create consumer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(properties);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // subscribe consumer to our topic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    consumer.subscribe(Arrays.asList(topic));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // poll for the new data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    while (true) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ConsumerRecords&lt;String, String&gt; records =</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                consumer.poll(Duration.ofMillis(100));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        for (ConsumerRecord&lt;String, String&gt; record : records) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            log.info(&quot;Key: &quot; + record.key() + &quot;, Value: &quot; + record.value());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            log.info(&quot;Partition: &quot; + record.partition() + &quot;, Offset: &quot; + record.offset());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="zookeeper">Zookeeper<a class="hash-link" href="#zookeeper" title="Direct link to heading">â€‹</a></h2><ul><li>Zookeeper manager brokers(keeps a list of them)</li><li>Zookeeper helps in performing leader election for partition</li><li>Zookeeper send notifications to kafka in case of any changes.</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="schema-registry">Schema Registry<a class="hash-link" href="#schema-registry" title="Direct link to heading">â€‹</a></h2><ul><li>Kafka takes bytes as an input and publishes them</li><li>No data verification</li><li>Schema registry rejects bat data</li><li>A common data format must be agreed upon<br><img alt="img.png" src="/assets/images/schema_registry-5d2bc22ab467d1c63dd41f0a70529c51.png"></li><li>Apache avro as data format<ul><li>Data is fully typed</li><li>Date is compressed automatically</li><li>Schema comes along with the data</li><li>Documentation is embedded in the schema</li><li>Data can be read across any language</li><li>Schema can be evolved over time in safe manner</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="avro">Avro<a class="hash-link" href="#avro" title="Direct link to heading">â€‹</a></h2><p>Apache Avro is a data serialization system.</p><ul><li>Avro provides:<ul><li>Rich data structures.</li><li>A compact, fast, binary data format.</li><li>A container file, to store persistent data.</li><li>Remote procedure call (RPC).</li><li>Simple integration with dynamic languages. Code generation is not required to read or write data files nor to use or implement RPC protocols. Code generation as an optional optimization, only worth implementing for statically typed languages.</li></ul></li></ul><div class="codeBlockContainer_K1bP language-avroschema theme-code-block"><div class="codeBlockContent_hGly avroschema"><pre tabindex="0" class="prism-code language-avroschema codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;namespace&quot;: &quot;dip.avro&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;name&quot;: &quot;User&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {&quot;name&quot;: &quot;name&quot;, &quot;type&quot;: &quot;string&quot;},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {&quot;name&quot;: &quot;favorite_number&quot;,  &quot;type&quot;: [&quot;int&quot;, &quot;null&quot;]},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    {&quot;name&quot;: &quot;favorite_color&quot;, &quot;type&quot;: [&quot;string&quot;, &quot;null&quot;]}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>Common Fields:<ul><li>Name: Name of the schema</li><li>Namespace: (equivalent of package in java)</li><li>Doc: Documentation to explain your schema</li><li>Aliases: Optional other name for schema</li><li>Fields<ul><li>Name: Name of field</li><li>Doc: Documentation for that field</li><li>Type: Data type for that field</li><li>Default: Default value for that field</li></ul></li><li>Complex types:<ul><li>Enums<div class="codeBlockContainer_K1bP language-avroschema theme-code-block"><div class="codeBlockContent_hGly avroschema"><pre tabindex="0" class="prism-code language-avroschema codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;enum&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;name&quot;: &quot;Customer Status&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;symbols&quot;: [&quot;BRONZE&quot;,&quot;SILVER&quot;,&quot;GOLD&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Arrays<div class="codeBlockContainer_K1bP language-avroschema theme-code-block"><div class="codeBlockContent_hGly avroschema"><pre tabindex="0" class="prism-code language-avroschema codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;array&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;items&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Maps<div class="codeBlockContainer_K1bP language-avroschema theme-code-block"><div class="codeBlockContent_hGly avroschema"><pre tabindex="0" class="prism-code language-avroschema codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;map&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;values&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Unions<div class="codeBlockContainer_K1bP language-avroschema theme-code-block"><div class="codeBlockContent_hGly avroschema"><pre tabindex="0" class="prism-code language-avroschema codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;name&quot;: &quot;middle_name&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;null&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;string&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;default&quot;: &quot;null&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li>Calling other schema as type</li></ul></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="kafka-rest-proxy">Kafka Rest Proxy<a class="hash-link" href="#kafka-rest-proxy" title="Direct link to heading">â€‹</a></h2><ul><li>kafka is great for java based consumers/producers</li><li>Avro support for some languages isn&#x27;t great, where JSON/HTTP requests are great.</li><li>Reporting data to Kafka from any frontend app built in any language not supported by official Confluent clients</li><li>Ingesting messages into a stream processing framework that doesnâ€™t yet support Kafka<br><img alt="img.png" src="/assets/images/restproxy-d23d9256c22457822c2645e2f3eb0bbb.png"></li><li>Perform a comprehensive set of administrative operations through REST APIs, including:<ul><li>Describe, list, and configure brokers</li><li>Create, delete, describe, list, and configure topics</li><li>Delete, describe, and list consumer groups</li><li>Create, delete, describe, and list ACLs</li><li>List partition reassignments</li></ul></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/kafka">kafka</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/tech">tech</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/java">java</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/github">Github Eyes</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-01-26T00:00:00.000Z" itemprop="datePublished">January 26, 2021</time> Â· <!-- -->3 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/dipjyotimetia" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars3.githubusercontent.com/u/18288720?s=400&amp;u=168a31a123ff5c1c44afc29a579f91d13813da54&amp;v=4" alt="Dipjyoti Metia"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/dipjyotimetia" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dipjyoti Metia</span></a></div><small class="avatar__subtitle" itemprop="description">Lead Software Engineer</small></div></div></div></div></header><meta itemprop="image" content="https://dipjyotimetia.github.io/../static/img/blog/gogithub.png"><div class="markdown" itemprop="articleBody"><p>Presenting github eyes, a golang implementation of the github rest apis using <a href="https://github.com/google/go-github" target="_blank" rel="noopener noreferrer">Google GitHub</a> sdk to interact with the <a href="https://docs.github.com/en/rest" target="_blank" rel="noopener noreferrer">Github Api</a>, using github apis we can crawl over multiple repository and automate different tasks from creating repo, creating labels, adding milestones, get latest commits, updating workflows, get the project build status etc, below is the basic demonstration of getting list of issues from multiple repos. </p><p><img alt="image" src="/assets/images/gogithub-4b1387f20a6475fafa5381be5c101bbb.png"></p><p>The go-github library does not directly handle authentication. The easiest and recommended way to do this is using the OAuth2 library, If you have an OAuth2 access token (for example, a personal API token), you can use it with the OAuth2 library.
To get the personal api token follow the <a href="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token" target="_blank" rel="noopener noreferrer">documentation</a> and
Below is the code snippet for authentication using <a href="https://github.com/golang/oauth2" target="_blank" rel="noopener noreferrer">oauth2</a>.</p><div class="codeBlockContainer_K1bP language-go theme-code-block"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">auth.go</div><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">package</span><span class="token plain"> github</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;context&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/google/go-github/v33/github&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;golang.org/x/oauth2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">AUthenticating using github access token</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// AuthGithubAPI authentication of github api</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">AuthGithubAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">github</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Client </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ts </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> oauth2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">StaticTokenSource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">oauth2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Token</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">AccessToken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;XXXXXXXXXXXXXXXXXXXXXXX&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    tc </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> oauth2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> github</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">NewClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">tc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Getting the list of issues in a repository, here we have created a struct named <code>Issues</code> with the required fields and then created a function <code>ListIssues</code> where we are passing the github api authentication and then <code>client.Issues.ListByRepo</code> is doing the job where underneath its calling <a href="https://docs.github.com/en/free-pro-team@latest/rest/reference/issues/#list-repository-issues" target="_blank" rel="noopener noreferrer">Github Issues Api</a>.<br>
<!-- -->We can also extend this function by adding filters to get open/closed issues and so on.</p><div class="codeBlockContainer_K1bP language-go theme-code-block"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">issues.go</div><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">package</span><span class="token plain"> github</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;context&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;log&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;time&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> Issues </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ID        </span><span class="token builtin" style="color:rgb(130, 170, 255)">int64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Title     </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    State     </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    CreatedAt time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Time</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    URL       </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ListIssues get list of issues</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ListIssues</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">repos </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">interface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ctx </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Background</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    client </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">AuthGithubAPI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    issues</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> client</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">Issues</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ListByRepo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;dipjyotimetia&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> repos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> err </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> issueList </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token keyword" style="font-style:italic">interface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> v </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">range</span><span class="token plain"> issues </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        issueList </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">append</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">issueList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">Issues</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">        v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">     v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetTitle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            State</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">     v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            CreatedAt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetCreatedAt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            URL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">       v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">GetHTMLURL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> issueList</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Main function to drive the show, here we are passing the repo names in an array called <code>repoNames</code> and in a loop calling the the function derived above <code>ListIssues</code> and then generating the result in a json file in local path.</p><div class="codeBlockContainer_K1bP language-go theme-code-block"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_eoMF">main.go</div><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;encoding/json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;github.com/goutils/pkg/github&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;io/ioutil&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    repoNames </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;HybridTestFramewrok&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MobileTestFramework&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> result </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token keyword" style="font-style:italic">interface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> repoName </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">range</span><span class="token plain"> repoNames </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        result </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">append</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> repoName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> github</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ListIssues</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">repoName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">MarshalIndent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token boolean" style="color:rgb(255, 88, 116)">_</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> ioutil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">WriteFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test.json&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0644</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example of the exported json data of the <code>ListIssues</code> function for the two repos.</p><div class="codeBlockContainer_K1bP language-json theme-code-block"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;HybridTestFramewrok&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;ID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">690950907</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Title&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Add reddis tests support&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;State&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;open&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;CreatedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2020-09-02T11:42:07Z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;URL&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://github.com/dipjyotimetia/HybridTestFramewrok/issues/65&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;ID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">690950833</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Title&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Add ssh login builder&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;State&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;open&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;CreatedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2020-09-02T11:42:01Z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;URL&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://github.com/dipjyotimetia/HybridTestFramewrok/issues/64&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;ID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">690950781</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Title&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Add file reader validations&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;State&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;open&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;CreatedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2020-09-02T11:41:55Z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;URL&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://github.com/dipjyotimetia/HybridTestFramewrok/issues/63&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;ID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">690950708</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Title&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;add kafka testing&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;State&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;open&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;CreatedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2020-09-02T11:41:48Z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;URL&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://github.com/dipjyotimetia/HybridTestFramewrok/issues/62&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;ID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">690950641</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Title&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;add rabitmq testing support&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;State&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;open&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;CreatedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2020-09-02T11:41:43Z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;URL&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://github.com/dipjyotimetia/HybridTestFramewrok/issues/61&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MobileTestFramework&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;ID&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">793821012</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Title&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Add AWS Device Farm support&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;State&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;open&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;CreatedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2021-01-26T00:19:55Z&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;URL&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://github.com/dipjyotimetia/MobileTestFramework/issues/88&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Project structure<br>
<img alt="image" src="/assets/images/gogithubstruct-7b6bd2487492508d1aeade35fa88c3a4.png"></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/github">github</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/tech">tech</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/golang">golang</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/serverless">Serverless Framework</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2020-05-16T00:00:00.000Z" itemprop="datePublished">May 16, 2020</time> Â· <!-- -->One min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/dipjyotimetia" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars3.githubusercontent.com/u/18288720?s=400&amp;u=168a31a123ff5c1c44afc29a579f91d13813da54&amp;v=4" alt="Dipjyoti Metia"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/dipjyotimetia" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dipjyoti Metia</span></a></div><small class="avatar__subtitle" itemprop="description">Lead Software Engineer</small></div></div></div></div></header><meta itemprop="image" content="https://raw.githubusercontent.com/Develop-X/Serverless/master/ServerlessFramework.png"><div class="markdown" itemprop="articleBody"><p><img src="https://raw.githubusercontent.com/Develop-X/Serverless/master/ServerlessFramework.png" alt="alt text"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="where-to-start"><a href="https://serverless.com/framework/docs/providers/aws/guide/quick-start/" target="_blank" rel="noopener noreferrer">Where to start?</a><a class="hash-link" href="#where-to-start" title="Direct link to heading">â€‹</a></h3><p><code>npm install -g serverless</code></p><p><img src="https://raw.githubusercontent.com/Develop-X/Serverless/master/serverless.png" alt="alt text"></p><ul><li><p><a href="https://serverless.com/framework/docs/providers/aws/guide/iam/" target="_blank" rel="noopener noreferrer">Create IAM user</a></p></li><li><p>Setup user access<br>
<!-- -->serverless config credentials --provider aws --key xxxxxxxxxxxxxx --secret xxxxxxxxxxxxxx</p></li><li><p>Create project<br>
<!-- -->serverless create --template aws-nodejs --path my-service</p></li><li><p><a href="https://serverless.com/framework/docs/providers/aws/guide/serverless.yml/" target="_blank" rel="noopener noreferrer">Serverless yml</a>  </p></li><li><p>Serverless Deploy<br>
<code>serverless deploy -v</code></p></li></ul><p><img src="https://raw.githubusercontent.com/Develop-X/Serverless/master/serverlessdeploy.png" alt="alt text"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="serverless-offline">Serverless offline<a class="hash-link" href="#serverless-offline" title="Direct link to heading">â€‹</a></h3><p><a href="https://github.com/dherault/serverless-offline" target="_blank" rel="noopener noreferrer">https://github.com/dherault/serverless-offline</a></p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">serverless plugin </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> --name serverless-offline</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">serverless offline start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img src="https://raw.githubusercontent.com/Develop-X/Serverless/master/serverlessOffline.png" alt="alt text"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="insomnia">Insomnia<a class="hash-link" href="#insomnia" title="Direct link to heading">â€‹</a></h3><p><img src="https://raw.githubusercontent.com/Develop-X/Serverless/master/serverlessMongo.png" alt="alt text"></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="serverless-dashbird">Serverless <a href="https://app.dashbird.io/" target="_blank" rel="noopener noreferrer">dashbird</a><a class="hash-link" href="#serverless-dashbird" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_31ik" id="mongodb">Mongodb<a class="hash-link" href="#mongodb" title="Direct link to heading">â€‹</a></h3><p><img src="https://raw.githubusercontent.com/Develop-X/Serverless/master/mongodb.png" alt="alt text"></p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> init -y</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> i --save-dev serverless-offline</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> i --save mongoose dotenv</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sls offline start --skipCacheInvalidation</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/serverless">serverless</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/tech">tech</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/aws">aws</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Hybrid Test Framework</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/projects/mobiletestframework">Mobile Test Framework</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/projects/cypress">Cypress Test Framework</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/users/6189229/dipjyoti-metia" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.gg/UXNmcyGuj2" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/dipjyoti_metia" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/dipjyotimetia" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Dipjyoti Metia</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1ed65664.js"></script>
<script src="/assets/js/main.7e4df6d9.js"></script>
</body>
</html>